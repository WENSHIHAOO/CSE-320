000000		.	=	150000
150000		
		call	=	170756
		ret	=	171013
		ret0	=	171010
		mul	=	171442
		div	=	171327
		vclrsc	=	172376
		
		MAXX	=	256.
		MAXY	=	512.
		NL	=	300.
		
		
	000700		clr	r0
150001	001100		mov	r0, @flag
	150401	
150003	000004		jsr	r5, call
	000760	
	000756	
150006	172376		vclrsc
150007	000004		jsr	r5, call
	000760	
	000756	
150012	152711		srand
150013	000700		clr	r0
150014	001100		mov	r0, @x1
	150366	
150016	001100		mov	r0, @y1
	150370	
150020	001100		mov	r0, @x2
	150367	
150022	001100		mov	r0, @y2
	150371	
150024	001100		mov	r0, @cnt1
	150372	
150026	001100		mov	r0, @cnt2
	150373	
150030	001100		mov	r0, @at
	150374	
150032	001200	loop:	mov	@flag, r0
	150401	
150034	000200		tst	r0
150035	001004		bze	lo.3
	000024	
150037	000251		mov	r5, r1
150040	001371		add	tx1, r1
	150402	
150042	001210		mov	@r1, r0
150043	000251		mov	r5, r1
150044	001371		add	tx2, r1
	151056	
150046	001212		mov	@r1, r2
150047	000251		mov	r5, r1
150050	001371		add	ty2, r1
	152206	
150052	001213		mov	@r1, r3
150053	000251		mov	r5, r1
150054	001371		add	ty1, r1
	151532	
150056	001211		mov	@r1, r1
150057	000004		jsr	r5, call
	000760	
	000756	
150062	152677		pline
150063		lo.3:
	001200		mov	@cnt1, r0
	150372	
150065	000200		tst	r0
150066	001014		bnze	lo.1
	000012	
150070	001270		mov	10., r0
	000012	
150072	000004		jsr	r5, call
	000760	
	000756	
150075	152662		rnd
150076	000010		inc	r0
150077	000201		mov	r0, r1
150100	000115		sll	2, r1
150101	000310		add	r1, r0
150102	000020	lo.1:	dec	r0
150103	001100		mov	r0, @cnt1
	150372	
150105	001200		mov	@cnt2, r0
	150373	
150107	000200		tst	r0
150110	001014		bnze	lo.2
	000056	
150112	001271		mov	9., r1
	000011	
150114	000210		mov	r1, r0
150115	001272		mov	4, r2
	000004	
150117	000004		jsr	r5, call
	000760	
	000756	
150122	152662		rnd
150123	000420		sub	r2, r0
150124	001100		mov	r0, @dx1
	150375	
150126	000210		mov	r1, r0
150127	000004		jsr	r5, call
	000760	
	000756	
150132	152662		rnd
150133	000420		sub	r2, r0
150134	001100		mov	r0, @dy1
	150377	
150136	000210		mov	r1, r0
150137	000004		jsr	r5, call
	000760	
	000756	
150142	152662		rnd
150143	000420		sub	r2, r0
150144	001100		mov	r0, @dx2
	150376	
150146	000210		mov	r1, r0
150147	000004		jsr	r5, call
	000760	
	000756	
150152	152662		rnd
150153	000420		sub	r2, r0
150154	001100		mov	r0, @dy2
	150400	
150156	001270		mov	10., r0
	000012	
150160	000004		jsr	r5, call
	000760	
	000756	
150163	152662		rnd
150164	000010		inc	r0
150165	000201		mov	r0, r1
150166	000115		sll	2, r1
150167	000310		add	r1, r0
150170	000020	lo.2:	dec	r0
150171	001100		mov	r0, @cnt2
	150373	
150173	001200		mov	@y2, r0
	150371	
150175	001300		add	@dy2, r0
	150400	
150177	001015		bge	upy2.1
	000002	
150201	001000		b	upy2.2
	000004	
150203	001570	upy2.1:	cmp	MAXY, r0
	001000	
150205	001005		blt	upy1
	000007	
150207	001200	upy2.2:	mov	@dy2, r0
	150400	
150211	000040		neg	r0
150212	001100		mov	r0, @dy2
	150400	
150214	001200		mov	@y2, r0
	150371	
150216	000203	upy1:	mov	r0, r3
150217	001200		mov	@y1, r0
	150370	
150221	001300		add	@dy1, r0
	150377	
150223	001015		bge	upy1.1
	000002	
150225	001000		b	upy1.2
	000004	
150227	001570	upy1.1:	cmp	MAXY, r0
	001000	
150231	001005		blt	upx2
	000007	
150233	001200	upy1.2:	mov	@dy1, r0
	150377	
150235	000040		neg	r0
150236	001100		mov	r0, @dy1
	150377	
150240	001200		mov	@y1, r0
	150370	
150242	000201	upx2:	mov	r0, r1
150243	001200		mov	@x2, r0
	150367	
150245	001300		add	@dx2, r0
	150376	
150247	001015		bge	upx2.1
	000002	
150251	001000		b	upx2.2
	000004	
150253	001570	upx2.1:	cmp	MAXX, r0
	000400	
150255	001005		blt	upx1
	000007	
150257	001200	upx2.2:	mov	@dx2, r0
	150376	
150261	000040		neg	r0
150262	001100		mov	r0, @dx2
	150376	
150264	001200		mov	@x2, r0
	150367	
150266	000202	upx1:	mov	r0, r2
150267	001200		mov	@x1, r0
	150366	
150271	001300		add	@dx1, r0
	150375	
150273	001015		bge	upx1.1
	000002	
150275	001000		b	upx1.2
	000004	
150277	001570	upx1.1:	cmp	MAXX, r0
	000400	
150301	001005		blt	done
	000007	
150303	001200	upx1.2:	mov	@dx1, r0
	150375	
150305	000040		neg	r0
150306	001100		mov	r0, @dx1
	150375	
150310	001200		mov	@x1, r0
	150366	
150312	000004	done:	jsr	r5, call
	000760	
	000756	
150315	152677		pline
150316	001100		mov	r0, @x1
	150366	
150320	001101		mov	r1, @y1
	150370	
150322	001102		mov	r2, @x2
	150367	
150324	001103		mov	r3, @y2
	150371	
150326	001204		mov	@at, r4
	150374	
150330	000245		mov	r4, r5
150331	001374		add	tx1, r4
	150402	
150333	001140		mov	r0, @r4
150334	000254		mov	r5, r4
150335	001374		add	ty1, r4
	151532	
150337	001141		mov	r1, @r4
150340	000254		mov	r5, r4
150341	001374		add	tx2, r4
	151056	
150343	001142		mov	r2, @r4
150344	000254		mov	r5, r4
150345	001374		add	ty2, r4
	152206	
150347	001143		mov	r3, @r4
150350	000015		inc	r5
150351	001575		cmp	NL, r5
	000454	
150353	001005		blt	lo.5
	000005	
150355	000755		clr	r5
150356	001270		mov	1, r0
	000001	
150360	001100		mov	r0, @flag
	150401	
150362	001105	lo.5:	mov	r5, @at
	150374	
150364	001040		b	loop
	000333	
150366		
	000000	x1:	0
150367	000000	x2:	0
150370	000000	y1:	0
150371	000000	y2:	0
150372	000000	cnt1:	0
150373	000000	cnt2:	0
150374	000000	at:	0
150375	000000	dx1:	0
150376	000000	dx2:	0
150377	000000	dy1:	0
150400	000000	dy2:	0
150401	000000	flag:	0
150402		tx1:	.	=	. + NL
151056		tx2:	.	=	. + NL
151532		ty1:	.	=	. + NL
152206		ty2:	.	=	. + NL
152662	000202	rnd:	mov	r0, r2
152663	000004		jsr	r5, call
	000760	
	000756	
152666	152715		rand
152667	000201		mov	r0, r1
152670	000700		clr	r0
152671	000004		jsr	r5, call
	000760	
	000756	
152674	171327		div
152675	001000		b	ret0
	016111	
152677		
	001274	pline:	mov	777, r4
	000777	
152701	000641		and	r4, r1
152702	000643		and	r4, r3
152703	001274		mov	377, r4
	000377	
152705	000640		and	r4, r0
152706	000642		and	r4, r2
152707	001000		b	line
	000070	
152711		
		.incld	rand.16
	001100	srand:	mov	r0,@seed
	152736	
152713	001000		jmp	ret
	016076	
152715		
	001201	rand:	mov	@seed,r1
	152736	
152717	001272		mov	13077.,r2
	031425	
152721	000004		jsr	r5,call
	000760	
	000756	
152724	171442		mul
152725	001371		add	6925.,r1
	015415	
152727	001101		mov	r1,@seed
	152736	
152731	001671		and	77777,r1
	077777	
152733	000210		mov	r1,r0
152734	001000		jmp	ret0
	016052	
152736		
	000001	seed:	1
152737		
		VMEM	=	130000
		
		
		;
		; place a dot at row r0, column r1
		;
		
	000114	plot:	sll	2, r0
152740	000114		sll	2, r0
152741	000110		sll	1, r0			; mult r0 by 32.
152742	001370		add	VMEM, r0		; address of row
	130000	
152744	000212		mov	r1, r2
152745	001672		and	17, r2
	000017	
152747	000155		sar	2, r1
152750	000155		sar	2, r1			; divide r1 by 16.
152751	000301		add	r0, r1			; address of word
152752	001372		add	msktab, r2		; get bit mask
	152761	
152754	001213		mov	@r1, r3			; word to change
152755	001723		xor	@r2, r3
152756	001113		mov	r3, @r1			; change it
152757	001000		b	ret
	016032	
152761		
	000001	msktab:	.word	000001, 000002, 000004, 000010, 000020, 000040
	000002	
	000004	
	000010	
	000020	
	000040	
152767	000100		.word	000100, 000200, 000400, 001000, 002000, 004000
	000200	
	000400	
	001000	
	002000	
	004000	
152775	010000		.word	010000, 020000, 040000, 100000
	020000	
	040000	
	100000	
153001		
		;
		; draw a line from row r0, column r1 to row r2, column r3
		;
		
	001102	line:	mov	r2, @nx1
	153147	
153003	001103		mov	r3, @ny1
	153150	
153005	001274		mov	1, r4
	000001	
153007	000245		mov	r4, r5
153010	000402		sub	r0, r2
153011	001015		bge	lin.1
	000002	
153013	000042		neg	r2
153014	000044		neg	r4
153015	001102	lin.1:	mov	r2, @adx
	153143	
153017	001104		mov	r4, @sdx
	153145	
153021	000413		sub	r1, r3
153022	001015		bge	lin.2
	000002	
153024	000043		neg	r3
153025	000045		neg	r5
153026	001103	lin.2:	mov	r3, @ady
	153144	
153030	001105		mov	r5, @sdy
	153146	
153032	000523		cmp	r2, r3
153033	001015		bge	yalg
	000043	
153035	000722		clr	r2
153036	000004	xalg:	jsr	r5, call
	000760	
	000756	
153041	152737		plot
153042	001500		cmp	@nx1, r0
	153147	
153044	001004		beq	ret
	015745	
153046	001300		add	@sdx, r0
	153145	
153050	001402		sub	@ady, r2
	153144	
153052	000223		mov	r2, r3
153053	000224		mov	r2, r4
153054	001015		bge	xal.1
	000001	
153056	000042		neg	r2
153057	001303	xal.1:	add	@adx, r3
	153143	
153061	000235		mov	r3, r5
153062	001015		bge	xal.2
	000001	
153064	000043		neg	r3
153065	000523	xal.2:	cmp	r2, r3
153066	001015		bge	xal.3
	000005	
153070	000252		mov	r5, r2
153071	001301		add	@sdy, r1
	153146	
153073	001040		b	xalg
	000036	
153075	000242	xal.3:	mov	r4, r2
153076	001040		b	xalg
	000041	
153100		
	000722	yalg:	clr	r2
153101	000004	yal.4:	jsr	r5, call
	000760	
	000756	
153104	152737		plot
153105	001501		cmp	@ny1, r1
	153150	
153107	001004		beq	ret
	015702	
153111	001301		add	@sdy, r1
	153146	
153113	001302		add	@adx, r2
	153143	
153115	000223		mov	r2, r3
153116	000224		mov	r2, r4
153117	001015		bge	yal.1
	000001	
153121	000042		neg	r2
153122	001403	yal.1:	sub	@ady, r3
	153144	
153124	000235		mov	r3, r5
153125	001015		bge	yal.2
	000001	
153127	000043		neg	r3
153130	000523	yal.2:	cmp	r2, r3
153131	001015		bge	yal.3
	000005	
153133	000252		mov	r5, r2
153134	001300		add	@sdx, r0
	153145	
153136	001040		b	yal.4
	000036	
153140	000242	yal.3:	mov	r4, r2
153141	001040		b	yal.4
	000041	
153143		
	000000	adx:	.word	0
153144	000000	ady:	.word	0
153145	000000	sdx:	.word	0
153146	000000	sdy:	.word	0
153147	000000	nx1:	.word	0
153150	000000	ny1:	.word	0
153151		

Symbol Table

MAXX     =	000400	MAXY     =	001000	NL       =	000454	
VMEM     =	130000	adx      =	153143	ady      =	153144	
at       =	150374	call     =	170756	cnt1     =	150372	
cnt2     =	150373	div      =	171327	done     =	150312	
dx1      =	150375	dx2      =	150376	dy1      =	150377	
dy2      =	150400	flag     =	150401	lin.1    =	153015	
lin.2    =	153026	line     =	153001	lo.1     =	150102	
lo.2     =	150170	lo.3     =	150063	lo.5     =	150362	
loop     =	150032	msktab   =	152761	mul      =	171442	
nx1      =	153147	ny1      =	153150	pline    =	152677	
plot     =	152737	rand     =	152715	ret      =	171013	
ret0     =	171010	rnd      =	152662	sdx      =	153145	
sdy      =	153146	seed     =	152736	srand    =	152711	
tx1      =	150402	tx2      =	151056	ty1      =	151532	
ty2      =	152206	upx1     =	150266	upx1.1   =	150277	
upx1.2   =	150303	upx2     =	150242	upx2.1   =	150253	
upx2.2   =	150257	upy1     =	150216	upy1.1   =	150227	
upy1.2   =	150233	upy2.1   =	150203	upy2.2   =	150207	
vclrsc   =	172376	x1       =	150366	x2       =	150367	
xal.1    =	153057	xal.2    =	153065	xal.3    =	153075	
xalg     =	153036	y1       =	150370	y2       =	150371	
yal.1    =	153122	yal.2    =	153130	yal.3    =	153140	
yal.4    =	153101	yalg     =	153100	
